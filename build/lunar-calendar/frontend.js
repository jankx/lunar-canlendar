!function(){"use strict";var e;e=function(){if(!document.querySelector(".lunar-calendar-container"))return;if("undefined"==typeof moment)return void console.warn("moment.js not loaded");moment&&moment.locale&&moment.locale("vi");const e=["Chủ nhật","Thứ hai","Thứ ba","Thứ tư","Thứ năm","Thứ sáu","Chủ nhật"],t={currentDate:moment(),selectedDate:moment(),isNavigating:!1},n={gregorianDay:document.getElementById("current-gregorian-day"),gregorianMonthYear:document.getElementById("current-gregorian-month-year"),gregorianDayName:document.getElementById("current-gregorian-day-name"),lunarDay:document.getElementById("current-lunar-day"),lunarMonthYear:document.getElementById("current-lunar-month-year"),lunarDetails:document.getElementById("current-lunar-details"),monthYear:document.getElementById("current-month-year"),monthSelector:document.getElementById("month-selector"),yearSelector:document.getElementById("year-selector"),viewBtn:document.getElementById("view-btn"),todayBtn:document.getElementById("today-btn"),days:document.getElementById("calendar-days")};function a(e){try{if(window._calendar&&window._calendar.SolarDate){const t=e.date(),n=e.month()+1,a=e.year(),r=new window._calendar.SolarDate({day:t,month:n,year:a}).toLunarDate();return r.init&&r.init(),{day:r.day,month:r.month,yearName:r.getYearName?r.getYearName():"",dayName:r.getDayName?r.getDayName():"",monthName:r.getMonthName?r.getMonthName():""}}}catch(e){console.warn("lunar calc failed",e)}return{day:"",month:"",yearName:"",dayName:"",monthName:""}}function r(){const r=t.selectedDate,o=r.date(),d=r.month()+1,m=r.year(),c=a(r);n.gregorianDay&&(n.gregorianDay.textContent=String(o).padStart(2,"0")),n.gregorianMonthYear&&(n.gregorianMonthYear.textContent=`Tháng ${String(d).padStart(2,"0")} năm ${m}`),n.gregorianDayName&&(n.gregorianDayName.textContent=e[r.day()]),n.lunarDay&&(n.lunarDay.textContent=c.day),n.lunarMonthYear&&(n.lunarMonthYear.textContent=`Tháng ${c.month} năm ${c.yearName}`),n.lunarDetails&&(n.lunarDetails.textContent=`Ngày ${c.dayName} - Tháng ${c.monthName}`),n.monthYear&&(n.monthYear.textContent=`Tháng ${t.currentDate.month()+1} - ${t.currentDate.year()}`),n.monthSelector&&(n.monthSelector.value=t.currentDate.month()+1),n.yearSelector&&(n.yearSelector.value=t.currentDate.year())}function o(){if(!n.days)return;n.days.innerHTML="";const e=t.currentDate.clone().startOf("month"),d=t.currentDate.clone().endOf("month"),m=e.clone().startOf("week"),c=d.clone().endOf("week"),l=m.clone();for(;l.isSameOrBefore(c,"day");){const e=document.createElement("div");e.className="lunar-calendar-day",l.isSame(t.currentDate,"month")||e.classList.add("other-month"),l.isSame(t.selectedDate,"day")&&e.classList.add("selected"),l.isSame(moment(),"day")&&e.classList.add("today");const d=document.createElement("div");d.className="lunar-day-number",d.textContent=l.date(),e.appendChild(d);const m=document.createElement("div");m.className="lunar-lunar-day",m.textContent=a(l).day,e.appendChild(m),e.addEventListener("click",function(){e.classList.contains("other-month")||(t.selectedDate=l.clone(),r(),o())}),n.days.appendChild(e),l.add(1,"day")}}r(),o(),function(){const e=document.getElementById("prev-month"),a=document.getElementById("next-month");e&&e.addEventListener("click",()=>{t.currentDate=t.currentDate.clone().subtract(1,"month"),r(),o()}),a&&a.addEventListener("click",()=>{t.currentDate=t.currentDate.clone().add(1,"month"),r(),o()}),n.viewBtn&&n.viewBtn.addEventListener("click",()=>{const e=parseInt(n.monthSelector.value,10),a=parseInt(n.yearSelector.value,10);t.currentDate=moment([a,e-1]),r(),o()}),n.todayBtn&&n.todayBtn.addEventListener("click",()=>{t.currentDate=moment(),t.selectedDate=moment(),r(),o()}),window.addEventListener("resize",()=>{o()})}()},"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}();