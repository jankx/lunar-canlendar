{"version":3,"file":"frontend.js","mappings":"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","sources":["webpack://jankx-lunar-calendar-block/./blocks/lunar-calendar/frontend.js"],"sourcesContent":["(function(){\n    'use strict';\n\n    function ready(fn){\n        if(document.readyState!=='loading'){fn();}else{document.addEventListener('DOMContentLoaded',fn)}\n    }\n\n    ready(function(){\n        const container=document.querySelector('.lunar-calendar-container');\n        if(!container) return;\n\n        // Expect moment, vi locale and window._calendar from @nghiavuive/lunar_date_vi\n        if(typeof moment==='undefined'){console.warn('moment.js not loaded');return;}\n        if(moment && moment.locale){moment.locale('vi');}\n\n        // Minimal runtime that delegates main logic to the original template behavior\n        // Using a simplified class to rebuild calendar days and wire controls\n\n        const dayNames=['Chủ nhật','Thứ hai','Thứ ba','Thứ tư','Thứ năm','Thứ sáu','Chủ nhật'];\n\n        const state={\n            currentDate: moment(),\n            selectedDate: moment(),\n            isNavigating:false\n        };\n\n        const el={\n            gregorianDay: document.getElementById('current-gregorian-day'),\n            gregorianMonthYear: document.getElementById('current-gregorian-month-year'),\n            gregorianDayName: document.getElementById('current-gregorian-day-name'),\n            lunarDay: document.getElementById('current-lunar-day'),\n            lunarMonthYear: document.getElementById('current-lunar-month-year'),\n            lunarDetails: document.getElementById('current-lunar-details'),\n            monthYear: document.getElementById('current-month-year'),\n            monthSelector: document.getElementById('month-selector'),\n            yearSelector: document.getElementById('year-selector'),\n            viewBtn: document.getElementById('view-btn'),\n            todayBtn: document.getElementById('today-btn'),\n            days: document.getElementById('calendar-days')\n        };\n\n        function getLunarDate(mDate){\n            try{\n                if(window._calendar && window._calendar.SolarDate){\n                    const d=mDate.date();\n                    const m=mDate.month()+1;\n                    const y=mDate.year();\n                    const solar=new window._calendar.SolarDate({day:d,month:m,year:y});\n                    const lunar=solar.toLunarDate();\n                    lunar.init && lunar.init();\n                    return {day:lunar.day,month:lunar.month,yearName:lunar.getYearName?lunar.getYearName():'',dayName:lunar.getDayName?lunar.getDayName():'',monthName:lunar.getMonthName?lunar.getMonthName():''};\n                }\n            }catch(e){console.warn('lunar calc failed',e)}\n            return {day:'',month:'',yearName:'',dayName:'',monthName:''};\n        }\n\n        function updateHeader(){\n            const d=state.selectedDate;\n            const gDay=d.date();\n            const gMonth=d.month()+1;\n            const gYear=d.year();\n            const lunar=getLunarDate(d);\n            if(el.gregorianDay) el.gregorianDay.textContent=String(gDay).padStart(2,'0');\n            if(el.gregorianMonthYear) el.gregorianMonthYear.textContent=`Tháng ${String(gMonth).padStart(2,'0')} năm ${gYear}`;\n            if(el.gregorianDayName) el.gregorianDayName.textContent=dayNames[d.day()];\n            if(el.lunarDay) el.lunarDay.textContent=lunar.day;\n            if(el.lunarMonthYear) el.lunarMonthYear.textContent=`Tháng ${lunar.month} năm ${lunar.yearName}`;\n            if(el.lunarDetails) el.lunarDetails.textContent=`Ngày ${lunar.dayName} - Tháng ${lunar.monthName}`;\n            if(el.monthYear) el.monthYear.textContent=`Tháng ${state.currentDate.month()+1} - ${state.currentDate.year()}`;\n            if(el.monthSelector) el.monthSelector.value=state.currentDate.month()+1;\n            if(el.yearSelector) el.yearSelector.value=state.currentDate.year();\n        }\n\n        function generateCalendar(){\n            if(!el.days) return;\n            el.days.innerHTML='';\n            const start=state.currentDate.clone().startOf('month');\n            const end=state.currentDate.clone().endOf('month');\n            const startCal=start.clone().startOf('week');\n            const endCal=end.clone().endOf('week');\n            const cur=startCal.clone();\n            while(cur.isSameOrBefore(endCal,'day')){\n                const div=document.createElement('div');\n                div.className='lunar-calendar-day';\n                if(!cur.isSame(state.currentDate,'month')) div.classList.add('other-month');\n                if(cur.isSame(state.selectedDate,'day')) div.classList.add('selected');\n                if(cur.isSame(moment(),'day')) div.classList.add('today');\n                const dn=document.createElement('div'); dn.className='lunar-day-number'; dn.textContent=cur.date(); div.appendChild(dn);\n                const ld=document.createElement('div'); ld.className='lunar-lunar-day'; ld.textContent=getLunarDate(cur).day; div.appendChild(ld);\n                div.addEventListener('click',function(){ if(div.classList.contains('other-month')) return; state.selectedDate=cur.clone(); updateHeader(); generateCalendar(); });\n                el.days.appendChild(div);\n                cur.add(1,'day');\n            }\n        }\n\n        function bindEvents(){\n            const prev=document.getElementById('prev-month');\n            const next=document.getElementById('next-month');\n            prev && prev.addEventListener('click',()=>{state.currentDate=state.currentDate.clone().subtract(1,'month');updateHeader();generateCalendar();});\n            next && next.addEventListener('click',()=>{state.currentDate=state.currentDate.clone().add(1,'month');updateHeader();generateCalendar();});\n            el.viewBtn && el.viewBtn.addEventListener('click',()=>{\n                const m=parseInt(el.monthSelector.value,10); const y=parseInt(el.yearSelector.value,10);\n                state.currentDate=moment([y,m-1]); updateHeader(); generateCalendar();\n            });\n            el.todayBtn && el.todayBtn.addEventListener('click',()=>{state.currentDate=moment(); state.selectedDate=moment(); updateHeader(); generateCalendar();});\n            window.addEventListener('resize',()=>{ generateCalendar(); });\n        }\n\n        updateHeader();\n        generateCalendar();\n        bindEvents();\n    });\n})();\n\n"],"names":["ready","fn","document","readyState","addEventListener","container","querySelector","moment","console","warn","locale","dayNames","state","currentDate","selectedDate","isNavigating","el","gregorianDay","getElementById","gregorianMonthYear","gregorianDayName","lunarDay","lunarMonthYear","lunarDetails","monthYear","monthSelector","yearSelector","viewBtn","todayBtn","days","getLunarDate","mDate","window","_calendar","SolarDate","d","date","m","month","y","year","solar","day","lunar","toLunarDate","init","yearName","getYearName","dayName","getDayName","monthName","getMonthName","e","updateHeader","gDay","gMonth","gYear","textContent","String","padStart","value","generateCalendar","innerHTML","start","clone","startOf","end","endOf","startCal","endCal","cur","isSameOrBefore","div","createElement","className","isSame","classList","add","dn","appendChild","ld","contains","bindEvents","prev","next","subtract","parseInt"],"sourceRoot":""}